CREATE TABLE inventory_part_ids (
	id INTEGER PRIMARY KEY AUTOINCREMENT,
	partno TEXT NOT NULL,
	vendor INTEGER NOT NULL,
	type INTEGER NOT NULL,
	UNIQUE(partno,vendor,type)
);

CREATE TABLE IF NOT EXISTS inventory_changes (
	id INTEGER PRIMARY KEY AUTOINCREMENT,
	partno TEXT NOT NULL,
	vendor INTEGER NOT NULL,
	onhand INTEGER NOT NULL,
	type INTEGER NOT NULL,
	t TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UNIQUE(partno,vendor,type,t)
);

CREATE TABLE IF NOT EXISTS inventory_current (
	id INTEGER PRIMARY KEY AUTOINCREMENT,
	partno TEXT NOT NULL,
	vendor INTEGER NOT NULL,
	onhand INTEGER NOT NULL,
	type INTEGER NOT NULL,
	UNIQUE(partno,vendor,type)
);

CREATE INDEX IF NOT EXISTS idx_partid ON inventory_changes(partno);
